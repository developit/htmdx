{"version":3,"file":"htmdx.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["import htm from 'htm';\nimport decode from 'html-entities-decode';\nimport marked from 'marked';\n\nexport interface Components<Component extends any> {\n  [key: string]: Component;\n}\n\nfunction handleComponents(m: string): string {\n  var regexAllTags = /<([A-Z][a-zA-Z1-6]+)([^<]+)*(?:>(.*)<\\/\\1>|\\s+\\/>)/g;\n\n  var htmlTags = m.match(regexAllTags);\n  var regexSingleTag = /<([A-Z][a-zA-Z1-6]+)([^<]+)*(?:>(.*)<\\/\\1>|\\s+\\/>)/;\n  if (htmlTags)\n    for (var i = 0; i < htmlTags.length && i < 5; i++) {\n      var match = regexSingleTag.exec(htmlTags[i]);\n      if (match) {\n        const newText = match[0]\n          .replace(`<${match[1]}`, '<${' + match[1] + '}')\n          .replace(`</${match[1]}`, '</${' + match[1] + '}');\n        m = m.replace(match[0], newText);\n      }\n    }\n  return m;\n}\n\nfunction markedToReact<\n  Component extends any = any,\n  C extends Components<Component> = Components<Component>\n>(m: string, components: Components<C>, html: () => any): any {\n  m = m.replace(/class=/g, 'className=');\n  m = decode(m);\n  m = handleComponents(m);\n  console.log(m);\n  return new Function(\n    ...['html', ...Object.keys(components), 'return html`' + m + '`']\n  )(...[html, ...Object.values(components)]);\n}\n\nexport interface HtmdxOptions<\n  Component extends any = any,\n  C extends Components<Component> = Components<Component>\n> {\n  components?: C;\n}\n\nexport function htmdx<\n  H extends (type: string, props: any, ...children: any[]) => any = (\n    type: string,\n    props: any,\n    ...children: any[]\n  ) => any,\n  O extends HtmdxOptions = HtmdxOptions\n>(m: string, h: H, options: O = {} as O): ReturnType<H> {\n  return markedToReact(marked(m), options.components || {}, htm.bind(h));\n}\n"],"names":["m","h","options","components","html","replace","htmlTags","match","regexSingleTag","i","length","exec","newText","handleComponents","decode","console","log","_construct","Function","Object","keys","values","markedToReact","marked","htm","bind"],"mappings":"wvBA8CA,SAOEA,EAAWC,EAAMC,mBAAAA,IAAAA,EAAa,IA3BhC,SAGEF,EAAWG,EAA2BC,UACtCJ,EAAIA,EAAEK,QAAQ,UAAW,cAEzBL,EAxBF,SAA0BA,OAGpBM,EAAWN,EAAEO,MAFE,uDAGfC,EAAiB,wDACjBF,EACF,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAASI,QAAUD,EAAI,EAAGA,IAAK,KAC7CF,EAAQC,EAAeG,KAAKL,EAASG,OACrCF,EAAO,KACHK,EAAUL,EAAM,GACnBF,YAAYE,EAAM,GAAM,MAAQA,EAAM,GAAK,KAC3CF,aAAaE,EAAM,GAAM,OAASA,EAAM,GAAK,KAChDP,EAAIA,EAAEK,QAAQE,EAAM,GAAIK,WAGvBZ,EASHa,CADJb,EAAIc,EAAOd,IAEXe,QAAQC,IAAIhB,GACLiB,EAAIC,UACL,eAAWC,OAAOC,KAAKjB,IAAa,eAAiBH,EAAI,qBACzDI,UAASe,OAAOE,OAAOlB,KAkBtBmB,CAAcC,EAAOvB,GAAIE,EAAQC,YAAc,GAAIqB,EAAIC,KAAKxB"}