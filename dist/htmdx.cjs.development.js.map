{"version":3,"file":"htmdx.cjs.development.js","sources":["../src/index.ts"],"sourcesContent":["import htm from 'htm';\nimport decode from 'html-entities-decode';\nimport marked from 'marked';\n\nexport interface Components<Component extends any> {\n  [key: string]: Component;\n}\n\nfunction handleComponents(m: string): string {\n  var regexAllTags = /<([A-Z][a-zA-Z1-6]+)([^<]+)*(?:>(.*)<\\/\\1>|\\s+\\/>)/g;\n\n  var htmlTags = m.match(regexAllTags);\n  var regexSingleTag = /<([A-Z][a-zA-Z1-6]+)([^<]+)*(?:>(.*)<\\/\\1>|\\s+\\/>)/;\n  if (htmlTags)\n    for (var i = 0; i < htmlTags.length && i < 5; i++) {\n      var match = regexSingleTag.exec(htmlTags[i]);\n      if (match) {\n        const newText = match[0]\n          .replace(`<${match[1]}`, '<${' + match[1] + '}')\n          .replace(`</${match[1]}`, '</${' + match[1] + '}');\n        m = m.replace(match[0], newText);\n      }\n    }\n  return m;\n}\n\nfunction markedToReact<\n  Component extends any = any,\n  C extends Components<Component> = Components<Component>\n>(m: string, components: Components<C>, html: () => any): any {\n  m = m.replace(/class=/g, 'className=');\n  m = decode(m);\n  m = handleComponents(m);\n  console.log(m);\n  return new Function(\n    ...['html', ...Object.keys(components), 'return html`' + m + '`']\n  )(...[html, ...Object.values(components)]);\n}\n\nexport interface HtmdxOptions<\n  Component extends any = any,\n  C extends Components<Component> = Components<Component>\n> {\n  components?: C;\n}\n\nexport function htmdx<\n  H extends (type: string, props: any, ...children: any[]) => any = (\n    type: string,\n    props: any,\n    ...children: any[]\n  ) => any,\n  O extends HtmdxOptions = HtmdxOptions\n>(m: string, h: H, options: O = {} as O): ReturnType<H> {\n  return markedToReact(marked(m), options.components || {}, htm.bind(h));\n}\n"],"names":["handleComponents","m","regexAllTags","htmlTags","match","regexSingleTag","i","length","exec","newText","replace","markedToReact","components","html","decode","console","log","Function","Object","keys","values","htmdx","h","options","marked","htm","bind"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,SAASA,gBAAT,CAA0BC,CAA1B;MACMC,YAAY,GAAG,qDAAnB;MAEIC,QAAQ,GAAGF,CAAC,CAACG,KAAF,CAAQF,YAAR,CAAf;MACIG,cAAc,GAAG,oDAArB;MACIF,QAAJ,EACE,KAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACI,MAAb,IAAuBD,CAAC,GAAG,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;QAC7CF,KAAK,GAAGC,cAAc,CAACG,IAAf,CAAoBL,QAAQ,CAACG,CAAD,CAA5B,CAAZ;;QACIF,KAAJ,EAAW;UACHK,OAAO,GAAGL,KAAK,CAAC,CAAD,CAAL,CACbM,OADa,OACDN,KAAK,CAAC,CAAD,CADJ,EACW,QAAQA,KAAK,CAAC,CAAD,CAAb,GAAmB,GAD9B,EAEbM,OAFa,QAEAN,KAAK,CAAC,CAAD,CAFL,EAEY,SAASA,KAAK,CAAC,CAAD,CAAd,GAAoB,GAFhC,CAAhB;MAGAH,CAAC,GAAGA,CAAC,CAACS,OAAF,CAAUN,KAAK,CAAC,CAAD,CAAf,EAAoBK,OAApB,CAAJ;;;SAGCR,CAAP;;;AAGF,SAASU,aAAT,CAGEV,CAHF,EAGaW,UAHb,EAGwCC,IAHxC;EAIEZ,CAAC,GAAGA,CAAC,CAACS,OAAF,CAAU,SAAV,EAAqB,YAArB,CAAJ;EACAT,CAAC,GAAGa,MAAM,CAACb,CAAD,CAAV;EACAA,CAAC,GAAGD,gBAAgB,CAACC,CAAD,CAApB;EACAc,OAAO,CAACC,GAAR,CAAYf,CAAZ;SACO,WAAIgB,QAAJ,GACD,MADC,SACUC,MAAM,CAACC,IAAP,CAAYP,UAAZ,CADV,GACmC,iBAAiBX,CAAjB,GAAqB,GADxD,mBAEDY,IAFC,SAEQK,MAAM,CAACE,MAAP,CAAcR,UAAd,CAFR,EAAP;;;AAYF,SAAgBS,MAOdpB,GAAWqB,GAAMC;MAAAA;IAAAA,UAAa;;;SACvBZ,aAAa,CAACa,MAAM,CAACvB,CAAD,CAAP,EAAYsB,OAAO,CAACX,UAAR,IAAsB,EAAlC,EAAsCa,GAAG,CAACC,IAAJ,CAASJ,CAAT,CAAtC,CAApB;;;;;"}